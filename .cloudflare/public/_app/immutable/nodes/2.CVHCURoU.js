import{f as se,a as Y,t as ue}from"../chunks/DuvPhHwd.js";import{o as we}from"../chunks/CbyC8nhY.js";import{l as _e,b as ke,c as z,h as F,y as Te,a as Ae,z as y,A as Me,r as Se,H as Ie,s as ve,d as G,n as J,C as Ce,B as Ne,m as re,t as Oe,i as P,D as Re,F as De,G as fe,I as pe,J as me,K as He,j as be,p as Fe,M as Ve,O as Be,P as K,k as he,Q as Le,R as Pe,S as Ye,T as Je,U as Ue,V as We,W as Xe,X as qe,Y as ze,Z as Ge,x as Ke,_ as Qe,$ as Ze,a0 as je,a1 as U,a2 as $e,a3 as w,a4 as g,a5 as ea,a6 as L,a7 as x,a8 as aa,a9 as ra}from"../chunks/CR5eoLWK.js";import{d as ta,s as Q}from"../chunks/CiHo1COA.js";import{i as de}from"../chunks/DLW1ulk_.js";import{r as Z}from"../chunks/CI16yMgu.js";import"../chunks/CfdVtywf.js";function sa(e,r){return r}function la(e,r,a){for(var t=e.items,n=[],s=r.length,v=0;v<s;v++)Pe(r[v].e,n,!0);var b=s>0&&n.length===0&&a!==null;if(b){var k=a.parentNode;Ye(k),k.append(a),t.clear(),R(e,r[0].prev,r[s-1].next)}Je(n,()=>{for(var p=0;p<s;p++){var T=r[p];b||(t.delete(T.k),R(e,T.prev,T.next)),he(T.e,!b)}})}function na(e,r,a,t,n,s=null){var v=e,b={flags:r,items:new Map,first:null};{var k=e;v=F?z(Te(k)):k.appendChild(_e())}F&&Ae();var p=null,T=!1,C=new Map,l=Me(()=>{var d=a();return me(d)?d:d==null?[]:pe(d)}),m,i;function f(){ia(i,m,b,C,v,n,r,t,a),s!==null&&(m.length===0?p?be(p):p=re(()=>s(v)):p!==null&&Fe(p,()=>{p=null}))}ke(()=>{i??=Ue,m=y(l);var d=m.length;if(T&&d===0)return;T=d===0;let N=!1;if(F){var M=Se(v)===Ie;M!==(d===0)&&(v=ve(),z(v),G(!1),N=!0)}if(F){for(var c=null,E,h=0;h<d;h++){if(J.nodeType===Ce&&J.data===Ne){v=J,N=!0,G(!1);break}var S=m[h],u=t(S,h);E=te(J,b,c,null,S,u,h,n,r,a),b.items.set(u,E),c=E}d>0&&z(ve())}if(F)d===0&&s&&(p=re(()=>s(v)));else if(Oe()){var o=new Set,_=P;for(h=0;h<d;h+=1){S=m[h],u=t(S,h);var A=b.items.get(u)??C.get(u);A?ge(A,S,h):(E=te(null,b,null,null,S,u,h,n,r,a,!0),C.set(u,E)),o.add(u)}for(const[I,O]of b.items)o.has(I)||_.skipped_effects.add(O.e);_.oncommit(f)}else f();N&&G(!0),y(l)}),F&&(v=J)}function ia(e,r,a,t,n,s,v,b,k){var p=r.length,T=a.items,C=a.first,l=C,m,i=null,f=[],d=[],N,M,c,E;for(E=0;E<p;E+=1){if(N=r[E],M=b(N,E),c=T.get(M),c===void 0){var h=t.get(M);if(h!==void 0){t.delete(M),T.set(M,h);var S=i?i.next:l;R(a,i,h),R(a,h,S),j(h,S,n),i=h}else{var u=l?l.e.nodes_start:n;i=te(u,a,i,i===null?a.first:i.next,N,M,E,s,v,k)}T.set(M,i),f=[],d=[],l=i.next;continue}if(ge(c,N,E),(c.e.f&K)!==0&&be(c.e),c!==l){if(m!==void 0&&m.has(c)){if(f.length<d.length){var o=d[0],_;i=o.prev;var A=f[0],I=f[f.length-1];for(_=0;_<f.length;_+=1)j(f[_],o,n);for(_=0;_<d.length;_+=1)m.delete(d[_]);R(a,A.prev,I.next),R(a,i,A),R(a,I,o),l=o,i=I,E-=1,f=[],d=[]}else m.delete(c),j(c,l,n),R(a,c.prev,c.next),R(a,c,i===null?a.first:i.next),R(a,i,c),i=c;continue}for(f=[],d=[];l!==null&&l.k!==M;)(l.e.f&K)===0&&(m??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue;c=l}f.push(c),i=c,l=c.next}if(l!==null||m!==void 0){for(var O=m===void 0?[]:pe(m);l!==null;)(l.e.f&K)===0&&O.push(l),l=l.next;var H=O.length;if(H>0){var V=p===0?n:null;la(a,O,V)}}e.first=a.first&&a.first.e,e.last=i&&i.e;for(var D of t.values())he(D.e);t.clear()}function ge(e,r,a,t){Re(e.v,r),e.i=a}function te(e,r,a,t,n,s,v,b,k,p,T){var C=(k&Ve)!==0,l=(k&Be)===0,m=C?l?De(n,!1,!1):fe(n):n,i=(k&He)===0?v:fe(v),f={i,v:m,k:s,a:null,e:null,prev:a,next:t};try{if(e===null){var d=document.createDocumentFragment();d.append(e=_e())}return f.e=re(()=>b(e,m,i,p),F),f.e.prev=a&&a.e,f.e.next=t&&t.e,a===null?T||(r.first=f):(a.next=f,a.e.next=f.e),t!==null&&(t.prev=f,t.e.prev=f.e),f}finally{}}function j(e,r,a){for(var t=e.next?e.next.e.nodes_start:a,n=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==t;){var v=Le(s);n.before(s),s=v}}function R(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function xe(e,r,a=!1){if(e.multiple){if(r==null)return;if(!me(r))return Xe();for(var t of e.options)t.selected=r.includes(ce(t));return}for(t of e.options){var n=ce(t);if(qe(n,r)){t.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function oa(e){var r=new MutationObserver(()=>{xe(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),We(()=>{r.disconnect()})}function ce(e){return"__value"in e?e.__value:e.value}function $(e,r,a=r){var t=new WeakSet;ze(e,"input",async n=>{var s=n?e.defaultValue:e.value;if(s=ee(e)?ae(s):s,a(s),P!==null&&t.add(P),await Ge(),s!==(s=r())){var v=e.selectionStart,b=e.selectionEnd,k=e.value.length;if(e.value=s??"",b!==null){var p=e.value.length;v===b&&b===k&&p>k?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=v,e.selectionEnd=Math.min(b,p))}}}),(F&&e.defaultValue!==e.value||Ke(r)==null&&e.value)&&(a(ee(e)?ae(e.value):e.value),P!==null&&t.add(P)),Qe(()=>{var n=r();if(e===document.activeElement){var s=Ze??P;if(t.has(s))return}ee(e)&&n===ae(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function ee(e){var r=e.type;return r==="number"||r==="range"}function ae(e){return e===""?null:+e}var ua=se('<form method="POST" action="?/register" class="p-2 m-2 bg-white rounded-sm"><div class="form-control p-2 flex items-center gap-4"><label for="task" class="w-32">タスクの名前：</label> <input name="task" placeholder="..." class="border border-gray-500 p-2 rounded-sm"/></div> <div class="form-control p-2 flex items-center gap-4"><label for="date" class="w-32">実施予定日：</label> <input name="date" type="date" class="border border-gray-500 p-2 rounded-sm"/></div> <div class="form-control p-2 flex items-center gap-4"><label for="reps" class="w-32">回数：</label> <input name="reps" type="number" placeholder="..." class="border border-gray-500 p-2 rounded-sm"/></div> <div class="form-control submit p-2"><button type="submit" class="bg-blue-500 text-white p-2 rounded-sm hover:bg-blue-600 cursor-pointer">送信</button></div></form>'),va=se('<li class="task p-2 m-2"><p class="task-title">タスク名　　：<span class="font-bold"> </span></p> <p class="task-date">実施日　　　：<span class="font-bold"> </span></p> <p class="task-times">実施回数　　：<span class="font-bold"> </span></p> <p class="task-status">ステータス　： <select><option>未着手</option><option>実施中</option><option>完了済</option></select></p></li>'),fa=se('<div class="container mx-auto h-screen bg-gray-100"><h1 class="fixed top-0 left-0 right-0 p-2 text-center text-4xl text-white font-bold bg-blue-500">習慣化アプリ</h1> <div class="register-area pt-20 pb-2 px-2"><button class="bg-blue-500 text-white p-2 rounded-sm hover:bg-blue-600 cursor-pointer"><!></button> <!></div> <hr/> <div class="filter-area flex p-2"><button class="p-1 m-1 bg-gray-200 rounded-sm cursor-pointer">全て</button> <button class="p-1 m-1 bg-gray-200 rounded-sm cursor-pointer">完了済みを除く</button></div> <ul class="tasks-list p-2 m-4 max-h-96 overflow-y-auto bg-white rounded-sm"></ul></div>');function ga(e,r){je(r,!0);let a=U(!1),t=U($e([])),n=U(""),s=U(""),v=U(0);we(()=>{L(t,Array.isArray(r.data.data)?[...r.data.data]:[],!0)});const b=async()=>{L(a,!y(a))},k=async()=>{L(t,Array.isArray(r.data.data)?[...r.data.data]:[],!0)},p=async()=>{const u=y(t).filter(o=>{let _;return o.status!=="completed"&&(_=o),_});L(t,u,!0)},T=async(u,o)=>{const _=y(t).filter(A=>A.id===o);_[0].status=u,await fetch("/api/tasks",{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({task:_[0]})})};var C=fa(),l=g(w(C),2),m=w(l);m.__click=b;var i=w(m);{var f=u=>{var o=ue("閉じる");Y(u,o)},d=u=>{var o=ue("登録する");Y(u,o)};de(i,u=>{y(a)?u(f):u(d,!1)})}x(m);var N=g(m,2);{var M=u=>{var o=ua(),_=w(o),A=g(w(_),2);Z(A),x(_);var I=g(_,2),O=g(w(I),2);Z(O),x(I);var H=g(I,2),V=g(w(H),2);Z(V),x(H),aa(2),x(o),$(A,()=>y(n),D=>L(n,D)),$(O,()=>y(s),D=>L(s,D)),$(V,()=>y(v),D=>L(v,D)),Y(u,o)};de(N,u=>{y(a)&&u(M)})}x(l);var c=g(l,4),E=w(c);E.__click=k;var h=g(E,2);h.__click=p,x(c);var S=g(c,2);na(S,21,()=>y(t),sa,(u,o)=>{var _=va(),A=w(_),I=g(w(A)),O=w(I,!0);x(I),x(A);var H=g(A,2),V=g(w(H)),D=w(V,!0);x(V),x(H);var W=g(H,2),le=g(w(W)),ye=w(le,!0);x(le),x(W);var ne=g(W,2),B=g(w(ne));B.__change=Ee=>T(Ee.target.value,y(o).id);var X=w(B);X.value=X.__value="skipped";var q=g(X);q.value=q.__value="in_progress";var ie=g(q);ie.value=ie.__value="completed",x(B);var oe;oa(B),x(ne),x(_),ra(()=>{Q(O,y(o).task_name),Q(D,y(o).scheduled_date),Q(ye,y(o).reps),oe!==(oe=y(o).status)&&(B.value=(B.__value=y(o).status)??"",xe(B,y(o).status))}),Y(u,_)}),x(S),x(C),Y(e,C),ea()}ta(["click","change"]);export{ga as component};
